---
layout: single
title: "[자바스크립트 Momentum앱]/노마드코더/클론코딩"
categories: 바닐라js
tag: [바닐라js]
toc: true
author_profile: false
sidebar:
  nav: "docs"
---

# 📋 ToDo 리스트 만들기

웹에서 바닐라 js를 통해 To Do-List를 만들어 보았다. 간단하게 사용자가 해야 할 일 목록을 생성하면 목록과 함께 지울 수 있는 버튼이 생긴다. 버튼을 클릭할 시, 목록을 지울 수 있다.



---

## ▶️ 실행 과정

1. html 파일에 Form 형태의 todo-form을 만들고, input, toDoList를 만든다.

   form으로 생성을 하면 input 값에 value를 입력한 후 엔터만 눌러도 바로 submit이 된다.

   ```html
   <form id="todo-form">
     <input type="text" placeholder="Write a ToDo and Press Enter" required />
   </form>
   <ul id="todo-list"></ul>
   <div id="quote">
     <span></span>
     <span></span>
   </div>
   ```

   

2. 생성된 html 파일의 부분들을 지정하여 변수로 생성한다.

   ```js
   const toDoForm = document.getElementById("todo-form");
   const toDoInput = document.querySelector("#todo-form input");
   const toDoList = document.getElementById("todo-list");
   ```

   getElementById 같은 경우 JS 방식을 통해 추출하는 것이고 querySelector 방식은 CSS 방식을 사용하는 것이다. querySelector를 사용할 때 id 값에 대하여 #을 쓰는 것을 잊지 말아야 한다.

   

3. ToDo Form에 input 값을 입력하고 "submit"(Form에서는 Enter)를 할시에 진행되는 함수를 생성한다. (진행되는 함수는 handleSubmit 함수이다.)

   ```js
   toDoForm.addEventListner("submit", handleSubmit);
   ```

   

4. handleSubmit 함수 내용을 코딩한다.

   handleSubmit 함수의 요구사항:

   1. 사용자가 입력한 값이 리스트 형식으로 나타나야한다

   2. 생성된 리스트 옆에는 ❌ 표시의 버튼이 있다

   3. 버튼을 클릭하게 되면 해당 리스트 값은 제거가 된다.

      

   handleSubmit 함수의 코드:

   ```js
   function handleSubmit(event) {
     event.preventDefault(); //form 형식에서는 submit한 후 바로 없어지므로
     const newToDo = toDoInput.value; //사용자가 입력한 값을 newToDo 변수에 저장한다.
     toDoInput.value = "";
     paintToDo(newToDo); //사용자가 입력한 값을 리스트로 표현하는 함수를 지정한다.
   }
   ```

 ✔️ Form 형태는 submit을 한 순간 바로 없어지므로 그러한 속성을 제한하기 위하여 event.preventDefault() 함수를 사용해야 한다.



5. paintToDo 함수를 생성한다.

```js
function paintToDo(newToDo) {
  const li = document.createElement("li");
  const span = document.createElement("span");
  span.innerText = newToDo;
  const button = document.createElement("button");
  button.innerText = "❌";
  button.addEventListner("click", deleteToDo);
  li.appendChild(span);
  li.appendChild(button);
  toDoList.appendChild(li);
}
```



PaintToDo 함수 요구사항:

✔️ 입력한 리스트가 화면에 나오도록 해야 한다.

✔️ 입력한 리스트 옆에 "❌"를 클릭할 시 리스트가 지워지도록 해야 한다.

입력한 값이 화면에 출력할 수 있도록 하기 위해서는 바닐라 JS에서 element를 생성하여 html에 붙이는 방식으로 진행하면 된다. 그러기 위해 createElement 함수를 사용한다.

이후 생성된 element가 html에 붙을 수 있도록 li.appendChild를 활용하여 li에 붙인다.



6. DeleteToDo 함수를 생성한다.

```js
function deleteToDo(event) {
  const li = event.target.parentElement;
  li.remove();
}
```

"❌"를 클릭할 시, 리스트에 있는 내용이 제거가 될 수 있도록 하고자 한다. 이때 모든 리스트를 제거하면 안되며, 클릭한 버튼 옆에 있는 리스트만 제거하고자 한다. 이를 위해서 event.target.parentElement를 통해 각 버튼이 속해 있는 element를 찾고 변수 li를 지정해준다.



7. LocalStorage에 리스트에 들어간 내용들을 저장하여 페이지를 새로 고침하여도 값이 저장 될 수 있도록 해야 한다. 그러기 위해서는 일단 toDos 리스트를 만들고 입력값을 리스트에 넣어줘야 한다.



```js
let toDos = [];

function handleSubmit(event) {
  event.preventDefault(); //form 형식에서는 submit한 후 바로 없어지므로
  const newToDo = toDoInput.value; //사용자가 입력한 값을 newToDo 변수에 저장한다.
  toDoInput.value = "";
  paintToDo(newToDo); //사용자가 입력한 값을 리스트로 표현하는 함수를 지정한다.
  toDos.push(newToDO);
  saveToDo();// saveToDo라는 함수를 지정한다.
}
```



8. saveToDo 함수를 생성한다.

```js
function saveToDo(){
    localStorage.setItem("todo", JSON.stringify(toDOs))
}
```



9. saveToDo 함수에서 생성한 로컬 스토리지 값을 savedToDos 변수에 저장한다.

```js
const savedToDos = localStorage.getItem("todo");
```



Recap:



```js
const toDoForm = document.getElementById("todo-form");
const toDoInput = document.querySelector("#todo-form input");
const toDoList = document.getElementById("todo-list");

let toDos = [];

function saveToDo(){
    localStorage.setItem("todo", JSON.stringify(toDos))
}

function deleteToDo(event){
    const li = event.target.parentElement;
    li.remove();
    saveToDo();
}

function paintToDo(newToDo){
    const li = document.createElement("li");
    const span = document.createElement("span");
    span.innerText = newToDo;
    const button = document.createElement("button");
    button.innerText = "❌";
    button.addEventListener("click", deleteToDo);
    li.appendChild(span);
    li.appendChild(button);
    toDoList.appendChild(li); 
}

function handleSubmit(event){
    event.preventDefault();
    const newToDo = toDoInput.value;
    toDoInput.value = "";
    paintToDo(newToDo);
    toDos.push(newToDo);
    saveToDo();
}

toDoForm.addEventListener("submit", handleSubmit);

const savedToDos = localStorage.getItem("todo");

```



9. 지금까지 한거로도 어느 정도 잘만들어 보인다. 하지만 한가지 문제점이 있다. 리스트에 동일한 값을 넣었을 때 로컬 스토리지는 두가지의 차이점을 잘 모른다는 것이다. 이를 해결하기 위해 object를 생성해준다. 이때 object 속성 값에 text로는 newToDo 값을, ID 값으로는 시간을 줘 동일한 텍스트 값이어도 ID 값이 달라 구분할 수 있도록 한다.



```js
function handleSubmit(event){
    event.preventDefault();
    const newToDo = toDoInput.value;
    toDoInput.value = "";
    const newToDoObj = {
        text: newToDo,
        id: Date.now(),
    }
    paintToDo(newToDoObj);
    toDos.push(newToDoObj);
    saveToDo();
}
```



10. newToDoObj 모든 코드에 적용한다.



```js
const toDoForm = document.getElementById("todo-form");
const toDoInput = document.querySelector("#todo-form input");
const toDoList = document.getElementById("todo-list");

const TODO_KEY = "todo";

let toDos = [];

function saveToDo(){
    localStorage.setItem(TODO_KEY, JSON.stringify(toDos))
}

function deleteToDo(event){
    const li = event.target.parentElement;
    li.remove();
    toDos = toDos.filter((toDo) => toDo.id !== parseInt(li.id));
    saveToDo();
}

function paintToDo(newToDo){
    const li = document.createElement("li");
    const span = document.createElement("span");
    span.innerText = newToDo.text;
    const button = document.createElement("button");
    button.innerText = "❌";
    button.addEventListener("click", deleteToDo);
    li.appendChild(span);
    li.appendChild(button);
    toDoList.appendChild(li); 
}

function handleSubmit(event){
    event.preventDefault();
    const newToDo = toDoInput.value;
    toDoInput.value = "";
    const newToDoObj = {
        text: newToDo,
        id: Date.now(),
    }
    paintToDo(newToDoObj);
    toDos.push(newToDoObj);
    saveToDo();
}

toDoForm.addEventListener("submit", handleSubmit);
```



11. localStorage에 값이 있을경우 savedToDos에서 값을 불러온뒤 parse를 하여 배열 형태로 바꾼다. 바꾼 배열의 원소 값들에 대해서 forEach함수를 통해 원소 하나 하나씩에 대하여 paintToDo 함수를 적용한다.



```js 
if (savedToDos !== null){
    const parsedToDos = JSON.parse(savedToDos);
    toDos = parsedToDos;
    parsedToDos.forEach(paintToDo);
}
```







